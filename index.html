<!doctype html>
<html lang="ja">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>„Åä„Åµ„Å®„Çì„Åä‰∏ñË©±„Ç≤„Éº„É†</title>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: 'Arial', 'Hiragino Sans', 'Yu Gothic', sans-serif;
      overflow: hidden;
    }
    
    html {
      height: 100%;
    }
    
    #game-container {
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
      padding: 20px;
    }
    
    #title {
      color: white;
      font-size: 32px;
      font-weight: bold;
      margin-bottom: 10px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    
    #character-name {
      color: white;
      font-size: 18px;
      margin-bottom: 20px;
      opacity: 0.9;
    }
    
    #bed-area {
      position: relative;
      width: 400px;
      height: 400px;
      background: #f0e6d2;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      overflow: hidden;
    }
    
    #character {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 140px;
      height: 160px;
      transition: transform 0.5s ease;
      z-index: 1;
    }
    
    .blanket {
      position: absolute;
      background: #ff9999;
      border: 3px solid #ff6666;
      border-radius: 15px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
    }
    
    #main-blanket {
      top: 30%;
      left: 50%;
      transform: translateX(-50%);
      width: 200px;
      height: 180px;
      z-index: 2;
      cursor: grab;
      touch-action: none;
    }
    
    #main-blanket.dragging {
      cursor: grabbing;
    }
    
    .body-part {
      position: absolute;
      cursor: pointer;
      transition: all 0.3s ease;
      z-index: 3;
    }
    
    .body-part:hover {
      transform: scale(1.1);
    }
    
    .body-part.covered {
      opacity: 0;
      pointer-events: none;
    }
    
    #stats {
      margin-top: 20px;
      background: white;
      padding: 15px 30px;
      border-radius: 15px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      text-align: center;
      min-width: 300px;
    }
    
    #health-bar {
      width: 100%;
      height: 25px;
      background: #e0e0e0;
      border-radius: 12px;
      overflow: hidden;
      margin: 10px 0;
      border: 2px solid #ccc;
    }
    
    #health-fill {
      height: 100%;
      background: linear-gradient(90deg, #ff6b6b, #ff9999);
      transition: width 0.5s ease;
      border-radius: 10px;
    }
    
    .stat-text {
      font-size: 16px;
      color: #333;
      margin: 5px 0;
    }
    
    #goodnight-btn {
      margin-top: 15px;
      padding: 12px 30px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border: none;
      border-radius: 25px;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
    }
    
    #goodnight-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0,0,0,0.3);
    }
    
    #goodnight-btn:active {
      transform: translateY(0);
    }
    
    #message {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: white;
      padding: 12px 24px;
      border-radius: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      font-size: 16px;
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 100;
      pointer-events: none;
    }
    
    #message.show {
      opacity: 1;
    }
    
    .sleeping-z {
      position: absolute;
      font-size: 24px;
      opacity: 0;
      animation: float-up 2s ease-in-out infinite;
    }
    
    @keyframes float-up {
      0% {
        opacity: 0;
        transform: translateY(0);
      }
      50% {
        opacity: 0.7;
      }
      100% {
        opacity: 0;
        transform: translateY(-50px);
      }
    }
    
    .star {
      position: absolute;
      font-size: 20px;
      animation: twinkle 1.5s ease-in-out infinite;
    }
    
    @keyframes twinkle {
      0%, 100% { opacity: 0.3; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.2); }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div id="game-container">
   <div id="message"></div>
   <h1 id="title">„Åä„Åµ„Å®„Çì„Åä‰∏ñË©±„Ç≤„Éº„É†</h1>
   <div id="character-name">
    „Å≠„ÇÄ„Å≠„ÇÄ„Å°„ÇÉ„Çì
   </div>
   <div id="bed-area">
    <div id="character">
     <svg viewbox="0 0 140 160"><!-- ÂçµÂûã„ÅÆ‰Ωì --> <ellipse cx="70" cy="80" rx="60" ry="75" fill="#fffaf0" stroke="#f5e6d3" stroke-width="4" /> <!-- Èñâ„Åò„ÅüÁõÆ --> <path d="M 45 70 Q 50 73 55 70" stroke="#333" stroke-width="3" fill="none" stroke-linecap="round" /> <path d="M 85 70 Q 90 73 95 70" stroke="#333" stroke-width="3" fill="none" stroke-linecap="round" /> <!-- „Åã„Çè„ÅÑ„ÅÑÂè£ --> <ellipse cx="70" cy="90" rx="8" ry="6" fill="#ff9999" opacity="0.6" /> <!-- „Åª„Å£„Å∫ --> <circle cx="38" cy="82" r="12" fill="#ffb3ba" opacity="0.5" /> <circle cx="102" cy="82" r="12" fill="#ffb3ba" opacity="0.5" /> <!-- ÊÆª„ÅÆÊ®°Êßò --> <path d="M 50 40 Q 55 35 60 40" stroke="#f5e6d3" stroke-width="2" fill="none" opacity="0.5" /> <path d="M 80 40 Q 85 35 90 40" stroke="#f5e6d3" stroke-width="2" fill="none" opacity="0.5" />
     </svg>
    </div>
    <div class="blanket" id="main-blanket"></div>
    <div class="body-part" id="left-arm" style="top: 42%; left: 8%;">
     <svg width="70" height="50" viewbox="0 0 70 50"><!-- „Ç∑„É≥„Éó„É´„Å™ËÖï --> <ellipse cx="40" cy="25" rx="28" ry="16" fill="#fffaf0" stroke="#f5e6d3" stroke-width="2" /> <!-- Êâã„ÅÆ„Å≤„Çâ --> <circle cx="15" cy="25" r="14" fill="#fffaf0" stroke="#f5e6d3" stroke-width="2" /> <!-- Êåá --> <circle cx="8" cy="18" r="5" fill="#fffaf0" stroke="#f5e6d3" stroke-width="1.5" /> <circle cx="10" cy="12" r="5" fill="#fffaf0" stroke="#f5e6d3" stroke-width="1.5" /> <circle cx="16" cy="10" r="5" fill="#fffaf0" stroke="#f5e6d3" stroke-width="1.5" /> <circle cx="22" cy="12" r="4.5" fill="#fffaf0" stroke="#f5e6d3" stroke-width="1.5" />
     </svg>
    </div>
    <div class="body-part" id="right-arm" style="top: 42%; right: 8%;">
     <svg width="70" height="50" viewbox="0 0 70 50"><!-- „Ç∑„É≥„Éó„É´„Å™ËÖï --> <ellipse cx="30" cy="25" rx="28" ry="16" fill="#fffaf0" stroke="#f5e6d3" stroke-width="2" /> <!-- Êâã„ÅÆ„Å≤„Çâ --> <circle cx="55" cy="25" r="14" fill="#fffaf0" stroke="#f5e6d3" stroke-width="2" /> <!-- Êåá --> <circle cx="62" cy="18" r="5" fill="#fffaf0" stroke="#f5e6d3" stroke-width="1.5" /> <circle cx="60" cy="12" r="5" fill="#fffaf0" stroke="#f5e6d3" stroke-width="1.5" /> <circle cx="54" cy="10" r="5" fill="#fffaf0" stroke="#f5e6d3" stroke-width="1.5" /> <circle cx="48" cy="12" r="4.5" fill="#fffaf0" stroke="#f5e6d3" stroke-width="1.5" />
     </svg>
    </div>
    <div class="body-part" id="left-leg" style="bottom: 12%; left: 20%;">
     <svg width="60" height="70" viewbox="0 0 60 70"><!-- Áü≠„ÅÑËÑö --> <ellipse cx="30" cy="30" rx="20" ry="28" fill="#fffaf0" stroke="#f5e6d3" stroke-width="2" /> <!-- Ë∂≥ --> <ellipse cx="28" cy="58" rx="18" ry="10" fill="#fffaf0" stroke="#f5e6d3" stroke-width="2" /> <!-- „Å§„ÅæÂÖà --> <circle cx="16" cy="56" r="4" fill="#fffaf0" stroke="#f5e6d3" stroke-width="1.5" /> <circle cx="22" cy="55" r="4" fill="#fffaf0" stroke="#f5e6d3" stroke-width="1.5" /> <circle cx="28" cy="55" r="4" fill="#fffaf0" stroke="#f5e6d3" stroke-width="1.5" /> <circle cx="34" cy="56" r="3.5" fill="#fffaf0" stroke="#f5e6d3" stroke-width="1.5" />
     </svg>
    </div>
    <div class="body-part" id="right-leg" style="bottom: 12%; right: 20%;">
     <svg width="60" height="70" viewbox="0 0 60 70"><!-- Áü≠„ÅÑËÑö --> <ellipse cx="30" cy="30" rx="20" ry="28" fill="#fffaf0" stroke="#f5e6d3" stroke-width="2" /> <!-- Ë∂≥ --> <ellipse cx="32" cy="58" rx="18" ry="10" fill="#fffaf0" stroke="#f5e6d3" stroke-width="2" /> <!-- „Å§„ÅæÂÖà --> <circle cx="44" cy="56" r="4" fill="#fffaf0" stroke="#f5e6d3" stroke-width="1.5" /> <circle cx="38" cy="55" r="4" fill="#fffaf0" stroke="#f5e6d3" stroke-width="1.5" /> <circle cx="32" cy="55" r="4" fill="#fffaf0" stroke="#f5e6d3" stroke-width="1.5" /> <circle cx="26" cy="56" r="3.5" fill="#fffaf0" stroke="#f5e6d3" stroke-width="1.5" />
     </svg>
    </div>
    <div class="sleeping-z" style="top: 15%; left: 70%; animation-delay: 0s;">
     üí§
    </div>
    <div class="sleeping-z" style="top: 10%; left: 75%; animation-delay: 0.7s;">
     üí§
    </div>
    <div class="sleeping-z" style="top: 5%; left: 80%; animation-delay: 1.4s;">
     üí§
    </div>
    <div class="star" style="top: 10%; left: 10%;">
     ‚ú®
    </div>
    <div class="star" style="top: 15%; right: 15%; animation-delay: 0.5s;">
     ‚ú®
    </div>
    <div class="star" style="bottom: 20%; left: 15%; animation-delay: 1s;">
     ‚ú®
    </div>
    <div class="star" style="bottom: 15%; right: 10%; animation-delay: 1.5s;">
     ‚ú®
    </div>
   </div>
   <div id="stats">
    <div class="stat-text">
     ÂÖÉÊ∞óÂ∫¶
    </div>
    <div id="health-bar">
     <div id="health-fill" style="width: 100%;"></div>
    </div>
    <div class="stat-text">
     „Åä‰∏ñË©±ÂõûÊï∞: <span id="care-count">0</span>Âõû
    </div><button id="goodnight-btn">„Åä„ÇÑ„Åô„Åø üí§</button>
   </div>
  </div>
  <script>
    const defaultConfig = {
      game_title: '„Åä„Åµ„Å®„Çì„Åä‰∏ñË©±„Ç≤„Éº„É†',
      character_name: '„Å≠„ÇÄ„Å≠„ÇÄ„Å°„ÇÉ„Çì',
      background_color: '#667eea',
      blanket_color: '#ff9999',
      text_color: '#ffffff',
      font_family: 'Arial',
      font_size: 16
    };
    
    let config = { ...defaultConfig };
    let gameData = null;
    const UNCOVERING_INTERVAL = 15000;
    const HEALTH_DECAY_RATE = 5;
    const MOVEMENT_INTERVAL = 86400000;
    
    let uncoverTimer = null;
    let healthCheckTimer = null;
    
    const bodyParts = ['left-arm', 'right-arm', 'left-leg', 'right-leg'];
    let uncoveredParts = [];
    
    async function onConfigChange(newConfig) {
      const titleElement = document.getElementById('title');
      const characterNameElement = document.getElementById('character-name');
      const gameContainer = document.getElementById('game-container');
      const blanket = document.getElementById('main-blanket');
      
      titleElement.textContent = newConfig.game_title || defaultConfig.game_title;
      titleElement.style.fontFamily = `${newConfig.font_family || defaultConfig.font_family}, 'Hiragino Sans', 'Yu Gothic', sans-serif`;
      titleElement.style.fontSize = `${(newConfig.font_size || defaultConfig.font_size) * 2}px`;
      titleElement.style.color = newConfig.text_color || defaultConfig.text_color;
      
      characterNameElement.textContent = newConfig.character_name || defaultConfig.character_name;
      characterNameElement.style.fontFamily = `${newConfig.font_family || defaultConfig.font_family}, 'Hiragino Sans', 'Yu Gothic', sans-serif`;
      characterNameElement.style.fontSize = `${(newConfig.font_size || defaultConfig.font_size) * 1.125}px`;
      characterNameElement.style.color = newConfig.text_color || defaultConfig.text_color;
      
      gameContainer.style.background = `linear-gradient(135deg, ${newConfig.background_color || defaultConfig.background_color} 0%, #764ba2 100%)`;
      blanket.style.background = newConfig.blanket_color || defaultConfig.blanket_color;
    }
    
    const dataHandler = {
      onDataChanged(data) {
        if (data.length > 0) {
          gameData = data[0];
          updateUI();
          checkCharacterMovement();
        }
      }
    };
    
    async function initGame() {
      const initResult = await window.dataSdk.init(dataHandler);
      
      if (!initResult.isOk) {
        console.error('„Éá„Éº„ÇøSDK„ÅÆÂàùÊúüÂåñ„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
        return;
      }
      
      if (!gameData) {
        const createResult = await window.dataSdk.create({
          last_care_time: Date.now(),
          health: 100,
          total_care_count: 0,
          last_movement_time: Date.now(),
          character_state: 'sleeping'
        });
        
        if (!createResult.isOk) {
          console.error('„Ç≤„Éº„É†„Éá„Éº„Çø„ÅÆ‰ΩúÊàê„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
        }
      }
      
      startGameLoop();
    }
    
    function startGameLoop() {
      uncoverRandomPart();
      if (Math.random() > 0.5) {
        uncoverRandomPart();
      }
      
      uncoverTimer = setInterval(() => {
        if (uncoveredParts.length < bodyParts.length) {
          uncoverRandomPart();
        }
      }, UNCOVERING_INTERVAL);
      
      healthCheckTimer = setInterval(() => {
        checkHealth();
      }, 10000);
    }
    
    function uncoverRandomPart() {
      const availableParts = bodyParts.filter(part => !uncoveredParts.includes(part));
      
      if (availableParts.length === 0) return;
      
      const randomPart = availableParts[Math.floor(Math.random() * availableParts.length)];
      uncoveredParts.push(randomPart);
      
      const partElement = document.getElementById(randomPart);
      partElement.classList.remove('covered');
    }
    
    let isDragging = false;
    let dragStartX = 0;
    let dragStartY = 0;
    let blanketStartX = 0;
    let blanketStartY = 0;
    
    function setupBlanketDrag() {
      const blanket = document.getElementById('main-blanket');
      
      blanket.addEventListener('mousedown', startDrag);
      blanket.addEventListener('touchstart', startDrag);
      
      document.addEventListener('mousemove', drag);
      document.addEventListener('touchmove', drag);
      
      document.addEventListener('mouseup', endDrag);
      document.addEventListener('touchend', endDrag);
    }
    
    function startDrag(e) {
      isDragging = true;
      const blanket = document.getElementById('main-blanket');
      blanket.classList.add('dragging');
      
      const rect = blanket.getBoundingClientRect();
      blanketStartX = rect.left + rect.width / 2;
      blanketStartY = rect.top + rect.height / 2;
      
      if (e.type === 'touchstart') {
        dragStartX = e.touches[0].clientX;
        dragStartY = e.touches[0].clientY;
      } else {
        dragStartX = e.clientX;
        dragStartY = e.clientY;
      }
      
      e.preventDefault();
    }
    
    function drag(e) {
      if (!isDragging) return;
      
      const blanket = document.getElementById('main-blanket');
      const bedArea = document.getElementById('bed-area');
      const bedRect = bedArea.getBoundingClientRect();
      
      let currentX, currentY;
      if (e.type === 'touchmove') {
        currentX = e.touches[0].clientX;
        currentY = e.touches[0].clientY;
      } else {
        currentX = e.clientX;
        currentY = e.clientY;
      }
      
      const deltaX = currentX - dragStartX;
      const deltaY = currentY - dragStartY;
      
      const newX = blanketStartX + deltaX - bedRect.left;
      const newY = blanketStartY + deltaY - bedRect.top;
      
      blanket.style.left = newX + 'px';
      blanket.style.top = newY + 'px';
      blanket.style.transform = 'translate(-50%, -50%)';
      
      checkBlanketCoverage();
      
      e.preventDefault();
    }
    
    function endDrag(e) {
      if (!isDragging) return;
      
      isDragging = false;
      const blanket = document.getElementById('main-blanket');
      blanket.classList.remove('dragging');
    }
    
    async function checkBlanketCoverage() {
      const blanket = document.getElementById('main-blanket');
      const blanketRect = blanket.getBoundingClientRect();
      
      let coveredCount = 0;
      const partsToCheck = [...uncoveredParts];
      
      partsToCheck.forEach(partId => {
        const partElement = document.getElementById(partId);
        const partRect = partElement.getBoundingClientRect();
        
        const isOverlapping = !(
          blanketRect.right < partRect.left ||
          blanketRect.left > partRect.right ||
          blanketRect.bottom < partRect.top ||
          blanketRect.top > partRect.bottom
        );
        
        if (isOverlapping) {
          const overlapX = Math.min(blanketRect.right, partRect.right) - Math.max(blanketRect.left, partRect.left);
          const overlapY = Math.min(blanketRect.bottom, partRect.bottom) - Math.max(blanketRect.top, partRect.top);
          const overlapArea = overlapX * overlapY;
          const partArea = partRect.width * partRect.height;
          const coverageRatio = overlapArea / partArea;
          
          if (coverageRatio > 0.3) {
            partElement.classList.add('covered');
            const index = uncoveredParts.indexOf(partId);
            if (index > -1) {
              uncoveredParts.splice(index, 1);
            }
            coveredCount++;
          }
        }
      });
      
      if (coveredCount > 0 && gameData) {
        gameData.last_care_time = Date.now();
        gameData.total_care_count += 1;
        
        if (gameData.health < 100) {
          gameData.health = Math.min(100, gameData.health + 10);
        }
        
        const updateResult = await window.dataSdk.update(gameData);
        
        if (updateResult.isOk) {
          showMessage('„ÅÇ„Çä„Åå„Å®„ÅÜÔºÅ üíï');
        }
      }
    }
    
    async function checkHealth() {
      if (!gameData) return;
      
      const timeSinceLastCare = Date.now() - gameData.last_care_time;
      const uncaredMinutes = Math.floor(timeSinceLastCare / 60000);
      
      if (uncoveredParts.length > 0 && uncaredMinutes > 1) {
        const healthLoss = uncoveredParts.length * HEALTH_DECAY_RATE;
        gameData.health = Math.max(0, gameData.health - healthLoss);
        gameData.last_care_time = Date.now();
        
        const updateResult = await window.dataSdk.update(gameData);
        
        if (updateResult.isOk) {
          if (gameData.health <= 0) {
            gameData.character_state = 'sick';
            await window.dataSdk.update(gameData);
            showMessage('È¢®ÈÇ™„Çí„Å≤„ÅÑ„Å°„ÇÉ„Å£„Åü... üò¢');
            clearInterval(uncoverTimer);
            clearInterval(healthCheckTimer);
          } else if (gameData.health < 30) {
            showMessage('ÂØí„Åù„ÅÜ... ü•∂');
          }
        }
      }
    }
    
    function checkCharacterMovement() {
      if (!gameData) return;
      
      const timeSinceLastMovement = Date.now() - gameData.last_movement_time;
      
      if (timeSinceLastMovement >= MOVEMENT_INTERVAL && gameData.health > 50) {
        const character = document.getElementById('character');
        character.style.transform = 'translate(-50%, -50%) rotate(15deg)';
        
        setTimeout(() => {
          character.style.transform = 'translate(-50%, -50%) rotate(-15deg)';
        }, 500);
        
        setTimeout(() => {
          character.style.transform = 'translate(-50%, -50%) rotate(0deg)';
        }, 1000);
        
        gameData.last_movement_time = Date.now();
        window.dataSdk.update(gameData);
        showMessage('„ÇÄ„Å´„ÇÉ„ÇÄ„Å´„ÇÉ... üò¥');
      }
    }
    
    function updateUI() {
      if (!gameData) return;
      
      const healthFill = document.getElementById('health-fill');
      const careCount = document.getElementById('care-count');
      
      healthFill.style.width = gameData.health + '%';
      careCount.textContent = gameData.total_care_count;
      
      if (gameData.health <= 0) {
        healthFill.style.background = '#666';
      } else if (gameData.health < 30) {
        healthFill.style.background = 'linear-gradient(90deg, #ff6b6b, #ff4444)';
      } else {
        healthFill.style.background = 'linear-gradient(90deg, #ff6b6b, #ff9999)';
      }
    }
    
    function showMessage(text) {
      const message = document.getElementById('message');
      message.textContent = text;
      message.classList.add('show');
      
      setTimeout(() => {
        message.classList.remove('show');
      }, 2000);
    }
    
    setupBlanketDrag();
    
    document.getElementById('goodnight-btn').addEventListener('click', async () => {
      if (!gameData) return;
      
      const blanket = document.getElementById('main-blanket');
      blanket.style.left = '50%';
      blanket.style.top = '30%';
      blanket.style.transform = 'translateX(-50%)';
      
      bodyParts.forEach(partId => {
        document.getElementById(partId).classList.add('covered');
      });
      uncoveredParts = [];
      
      gameData.last_care_time = Date.now();
      const updateResult = await window.dataSdk.update(gameData);
      
      if (updateResult.isOk) {
        showMessage('„Åä„ÇÑ„Åô„Åø„Å™„Åï„ÅÑ... üåô‚ú®');
      }
    });
    
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [
            {
              get: () => config.background_color || defaultConfig.background_color,
              set: (value) => {
                config.background_color = value;
                window.elementSdk.setConfig({ background_color: value });
              }
            },
            {
              get: () => config.blanket_color || defaultConfig.blanket_color,
              set: (value) => {
                config.blanket_color = value;
                window.elementSdk.setConfig({ blanket_color: value });
              }
            },
            {
              get: () => config.text_color || defaultConfig.text_color,
              set: (value) => {
                config.text_color = value;
                window.elementSdk.setConfig({ text_color: value });
              }
            }
          ],
          borderables: [],
          fontEditable: {
            get: () => config.font_family || defaultConfig.font_family,
            set: (value) => {
              config.font_family = value;
              window.elementSdk.setConfig({ font_family: value });
            }
          },
          fontSizeable: {
            get: () => config.font_size || defaultConfig.font_size,
            set: (value) => {
              config.font_size = value;
              window.elementSdk.setConfig({ font_size: value });
            }
          }
        }),
        mapToEditPanelValues: (config) => new Map([
          ['game_title', config.game_title || defaultConfig.game_title],
          ['character_name', config.character_name || defaultConfig.character_name]
        ])
      });
      
      config = window.elementSdk.config;
      onConfigChange(config);
    }
    
    initGame();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a0a80326125e394',t:'MTc2MzUwMDcxMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
